<div class="container">
  <div class="row">
    <div
      *ngFor="let visualizer of visualiser.visualizers"
      class="mb-2"
      [ngClass]="{
        'col-md-3 col-sm-6 mb-4': visualizer.groupable,
        'col-12 mb-4': !visualizer.groupable
      }"
      class="requirement-container"
    >
      <!-- Display the header for the requirement -->
      <div class="requirement-header">
        {{ visualizer['currentRequirement'].requirementName || visualizer['currentRequirement'].types[0] }}
      </div>

      <div class="row">
        <!-- Render filled units as cards -->
        <ng-container *ngFor="let unit of platoon.units">
          <div [ngClass]="{
            'col-md-3 col-sm-6 mb-4': !visualizer.groupable,
            'col-12 mb-4': visualizer.groupable
          }">
            <mat-card class="filled-unit-card full-width">
              <mat-card-content>
                <!-- {{ unit.type }} {{ unit.subType || '' }} -->
              </mat-card-content>
            </mat-card>
          </div>
        </ng-container>

        <!-- Render unfilled slots as buttons -->
        <ng-container *ngFor="let slot of visualizer.slots">
          <div [ngClass]="{
              'col-md-3 col-sm-6 mb-4': !visualizer.groupable,
              'col-12 mb-4': visualizer.groupable
            }">
            <button *ngIf="slot.isMandatory; else raisedButton" mat-flat-button color="primary" class="w-100 mandatory">
              Add Unit
            </button>
            <ng-template #raisedButton>
              <button mat-raised-button color="primary" class="w-100">
                Add Unit
              </button>
            </ng-template>
          </div>
        </ng-container>
      </div>
    </div>
  </div>
</div>
